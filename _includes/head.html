<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon"/>
  <title>{% if page.title %}{{ page.title }} - {{ site.title | escape }}{% else %}{{ site.title | escape }}{% endif %}</title>
  <meta name="description" content="{% if page.desc %}{{ page.desc | strip_html | strip_newlines | truncate: 180 }}{% else %}{{ site.description }}{% endif %}"/>
  
  {% seo %}

  {% if page.layout == 'post' %}
    {% include post-meta.html %}
  {% endif %}

  <link rel="canonical" href="{{ page.url | prepend: site.url }}">
  <script src="{{ '/assets/js/load-css.js' | prepend: site.baseurl }}" type="text/javascript"></script>
  <style>{% include critical.css %}</style>
  <link rel="stylesheet" href="{{ '/assets/fonts/AvenirNext.css' | prepend: site.baseurl }}"/>
  <link rel="stylesheet" href="{{ '/assets/fonts/GothamHTF.css' | prepend: site.baseurl }}"/>

  <noscript>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i|Merriweather:300,300i,400,400i,700,700i,900,900i' rel='stylesheet' type='text/css'/>
    <link rel="stylesheet" href="{{ '/assets/fonts/AvenirNext.css' | prepend: site.baseurl }}"/>
    <link rel="stylesheet" href="{{ '/assets/fonts/GothamHTF.css' | prepend: site.baseurl }}"/>
    <link rel="stylesheet" href="{{ '/assets/fonts/FiraCode.css' | prepend: site.baseurl }}"/>
    <!-- <link rel="stylesheet" href="{{ '/assets/fonts/iconfont.css' | prepend: site.baseurl }}"/> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css"/>
    <link href="{{ '/assets/styles/main.css' | prepend: site.baseurl }}" rel='stylesheet' type='text/css'/>
  </noscript>

  {% if page.image %}
    {% assign first_char = page.image | slice: 0 %}
    {% if first_char == '/' %}
      {% assign second_char = page.image | slice: 1 %}
      {% if second_char == '/' %}
        {% assign imageurl = page.image %}
      {% else %}
        {% assign imageurl = page.image | prepend: site.baseurl %}
      {% endif %}
    {% else %}
      {% assign imageurl = page.image | prepend: "/assets/img/" | prepend: site.baseurl %}
    {% endif %}
  <style>
    #main > header {
      background-image: -moz-linear-gradient(top, rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url("{{ imageurl }}");
      background-image: -webkit-linear-gradient(top, rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url("{{ imageurl }}");
      background-image: -ms-linear-gradient(top, rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url("{{ imageurl }}");
      background-image: linear-gradient(top, rgba(0,0,0,0.35), rgba(0,0,0,0.35)), url("{{ imageurl }}");
    }
  </style>
  {% endif %}
  {% if page.style-includes %}
    {% for include in page.style-includes %}
      {% assign test1 = include | slice: 0,2 %}
      {% if test1 == "//" %}
        <link rel="stylesheet" href="{{ include }}"/>
      {% else %}
        <link rel="stylesheet" href="{{ include | prepend: site.baseurl }}"/>
      {%endif %}
    {% endfor %}
  {% endif %}

  {% if page.style %}
    <style>
      {{ page.style }}
    </style>
  {% endif %}
  <link rel="alternate" type="application/rss+xml" title="{{ site.title }}" href="{{ '/feed.xml' | prepend: site.baseurl | prepend: site.url }}"/>
</head>
