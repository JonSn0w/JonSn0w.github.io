(function(a){a.fn.simpleJekyllSearch=function(k){var c=a.extend({jsonFile:"/search.json",template:'<a href="{url}" title="{desc}">{title}</a>',searchResults:".results",searchResultsTitle:"<h4>Search results</h4>",limit:"10",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"},k);var i=[],d=this,b=a(c.searchResults);var e=[];if(c.jsonFile.length&&b.length){a.ajax({type:"GET",url:c.jsonFile,dataType:"json",success:function(m,n,l){i=m;g()},error:function(l,n,m){console.log("***ERROR in simpleJekyllSearch.js***");console.log(l);console.log(n);console.log(m)}})}function g(){d.keyup(function(l){if(l.which===13){if(e){window.location=e[0].url}}if(a(this).val().length){h(j(a(this).val()))}else{f()}})}function j(p){e=[];for(var n=0;n<i.length;n++){var o=i[n];for(key in o){if(o.hasOwnProperty(key)){if(o[key] instanceof Array){var l=false;for(var m=0;m<o[key].length;m++){if(o[key][m].toLowerCase().indexOf(p.toLowerCase())>=0){e.push(o);break}}}else{if(o[key].toLowerCase().indexOf(p.toLowerCase())>=0){e.push(o);break}}}}}return e}function h(l){f();b.append(a(c.searchResultsTitle));if(l&&l.length){for(var n=0;n<l.length&&n<c.limit;n++){var o=l[n];output=c.template;output=output.replace(/\{(.*?)\}/g,function(m,p){return o[p]});b.append(a(output))}}else{b.append(c.noResults)}}function f(){b.children().remove()}}}(jQuery));